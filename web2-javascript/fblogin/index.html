<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Web</title>
    <script>
      var checkLoginState = function(response) {               // Called when a person is finished with the Login Button.
          console.log(response);
          if (response.status === "connected") {
            document.querySelector('#loginbtn').value = "logout";
            testAPI();
          }
          else{
            document.querySelector('#loginbtn').value = "login";
          }
        };

      window.fbAsyncInit = function() {
        FB.init({
          appId      : '518168542604729',
          cookie     : true,                     // Enable cookies to allow the server to access the session.
          xfbml      : true,                     // Parse social plugins on this webpage.
          version    : 'v11.0'           // Use this Graph API version for this call.
        });

        FB.getLoginStatus(checkLoginState);
      };

      function testAPI() {                      // Testing Graph API after login.  See statusChangeCallback() for when this call is made.
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me', function(response) {
          console.log('Successful login for: ' + response.name);
          document.querySelector('#name').innerHTML =
            'Thanks for logging in, ' + response.name + '!';
        });
      }
    </script>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
  </head>
  <body>
    <h1>Web</h1>
    <input type="button" id = "loginbtn" value="Checking..." onclick="
      if(this.value === 'login'){
        FB.login(function(response) {
          console.log(response);
          checkLoginState(response);
        });
      }else{
        FB.logout(function(response){
          console.log(response);
          checkLoginState(response);
        })
      }
    ">
    <span id="name"></span>
  </body>
</html>
